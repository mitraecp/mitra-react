<!DOCTYPE html>
<html lang="pt-BR" class="h-full">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React Playground - Componentes Shadcn</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Monaco Editor via CDN -->
    <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0/min/vs/editor/editor.main.min.css">
    <script>var require = { paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0/min/vs' } };</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0/min/vs/loader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0/min/vs/editor/editor.main.nls.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.43.0/min/vs/editor/editor.main.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --primary-50: #f0f9ff;
            --primary-100: #e0f2fe;
            --primary-200: #bae6fd;
            --primary-300: #7dd3fc;
            --primary-400: #38bdf8;
            --primary-500: #0ea5e9;
            --primary-600: #0284c7;
            --primary-700: #0369a1;
            --primary-800: #075985;
            --primary-900: #0c4a6e;

            --bg-color: #f9fafb;
            --card-bg: #ffffff;
            --text-color: #1f2937;
            --text-muted: #6b7280;
            --border-color: #e5e7eb;
            --hover-bg: #f3f4f6;
        }

        .dark {
            --bg-color: #111827;
            --card-bg: #1f2937;
            --text-color: #f9fafb;
            --text-muted: #9ca3af;
            --border-color: #374151;
            --hover-bg: #374151;
        }
    </style>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .code-editor {
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }

        .log-entry {
            position: relative;
            margin-bottom: 0.5rem;
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
        }

        .log-entry::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            border-radius: 4px 0 0 4px;
        }

        .log-entry.info::before {
            background-color: #94a3b8;
        }

        .log-entry.sent::before {
            background-color: #10b981;
        }

        .log-entry.received::before {
            background-color: #3b82f6;
        }

        .log-entry.error::before {
            background-color: #ef4444;
        }

        .filter-btn.active {
            background-color: var(--primary-600);
            color: white;
        }
        .filter-btn.active:hover {
            background-color: var(--primary-700);
        }
    </style>
</head>

<body class="min-h-full">
    <div class="max-w-[1920px] mx-auto p-4 lg:p-6 transition-colors duration-300">
        <!-- Header -->
        <header class="mb-6">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-2">
                <h1 class="text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="text-primary-600">
                        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
                        <polyline points="14 2 14 8 20 8"></polyline>
                        <path d="M8 16h8"></path>
                        <path d="M8 12h8"></path>
                    </svg>
                    React Playground
                </h1>
                <div class="flex gap-2">
                    <button id="theme-toggle" class="p-2 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5" />
                            <path
                                d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4" />
                        </svg>
                    </button>
                </div>
            </div>
            <p class="text-gray-600 max-w-2xl">
                Crie, visualize e compartilhe componentes React com Shadcn UI e Tailwind CSS.
                Escreva seu código e veja o resultado em tempo real.
            </p>
        </header>
        <!-- Components Library Section -->
        <section class="mt-6 rounded-xl shadow-sm border overflow-hidden transition-colors duration-300" style="background-color: var(--card-bg); border-color: var(--border-color);">
            <div class="border-b px-4 py-3 flex justify-between items-center transition-colors duration-300" style="border-color: var(--border-color); background-color: var(--hover-bg);">
                <h2 class="font-semibold flex items-center gap-2 transition-colors duration-300" style="color: var(--text-color);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="text-primary-500">
                        <path d="M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z"></path>
                        <path d="m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9"></path>
                        <path d="M12 3v6"></path>
                    </svg>
                    Biblioteca de Componentes
                </h2>
            </div>
            <div class="p-4 space-y-4">
                <!-- Filtros e Busca -->
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="relative flex-grow">
                        <input type="text" id="search-components" placeholder="Buscar componentes..."
                            class="w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-400 focus:border-transparent transition-colors duration-300" style="background-color: var(--card-bg); color: var(--text-color); border-color: var(--border-color);">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="absolute left-3 top-1/2 transform -translate-y-1/2 transition-colors duration-300" style="color: var(--text-muted);">
                            <circle cx="11" cy="11" r="8"></circle>
                            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                        </svg>
                    </div>
                    <div class="flex gap-2">
                        <button id="filter-all"
                            class="filter-btn active px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);">Todos</button>
                        <button id="filter-foundation"
                            class="filter-btn px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);">Foundation</button>
                        <button id="filter-system"
                            class="filter-btn px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);">System</button>
                    </div>
                </div>

                <!-- Lista de Componentes -->
                <div id="api-components-list"
                    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6 mt-4">
                    <div class="text-center col-span-full py-12">
                        <svg class="animate-spin h-8 w-8 text-primary-500 mx-auto mb-4"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                            </circle>
                            <path class="opacity-75" fill="currentColor"
                                d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                            </path>
                        </svg>
                        <p class="text-gray-500">Carregando componentes...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-5">
            <!-- Editor Section -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Code Editor -->
                <section class="rounded-xl shadow-sm border overflow-hidden transition-colors duration-300" style="background-color: var(--card-bg); border-color: var(--border-color);">
                    <div class="border-b px-4 py-3 flex justify-between items-center transition-colors duration-300" style="border-color: var(--border-color); background-color: var(--hover-bg);">
                        <h2 class="font-semibold flex items-center gap-2 transition-colors duration-300" style="color: var(--text-color);">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="text-primary-500">
                                <polyline points="16 18 22 12 16 6"></polyline>
                                <polyline points="8 6 2 12 8 18"></polyline>
                            </svg>
                            Editor de Código React
                        </h2>
                        <div class="flex gap-2">
                            <button class="text-xs text-gray-500 hover:text-gray-700" id="format-code">
                                Formatar
                            </button>
                        </div>
                    </div>
                    <div class="p-4 transition-colors duration-300" style="background-color: var(--hover-bg);">
                        <div id="monaco-editor-container" class="w-full h-[400px] border border-gray-300 rounded-lg overflow-hidden"></div>
                        <input type="hidden" id="component-code" value="">
                    </div>
                    <div class="px-4 py-3 border-t flex flex-wrap gap-2 transition-colors duration-300" style="background-color: var(--hover-bg); border-color: var(--border-color);">
                        <button id="render-button"
                            class="flex-none px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md font-medium transition-colors flex items-center gap-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <polygon points="5 3 19 12 5 21 5 3"></polygon>
                            </svg>
                            Renderizar
                        </button>
                        <button id="share-button"
                            class="flex-none px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md font-medium transition-colors flex items-center gap-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
                                <polyline points="16 6 12 2 8 6"></polyline>
                                <line x1="12" y1="2" x2="12" y2="15"></line>
                            </svg>
                            Compartilhar
                        </button>
                    </div>
                </section>

                <!-- Examples Section -->
                <section class="rounded-xl shadow-sm border overflow-hidden transition-colors duration-300" style="background-color: var(--card-bg); border-color: var(--border-color);">
                    <div class="border-b px-4 py-3 transition-colors duration-300" style="border-color: var(--border-color); background-color: var(--hover-bg);">
                        <h2 class="font-semibold flex items-center gap-2 transition-colors duration-300" style="color: var(--text-color);">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="text-primary-500">
                                <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
                                <polyline points="14 2 14 8 20 8"></polyline>
                                <path d="M8 16h8"></path>
                                <path d="M8 12h8"></path>
                            </svg>
                            Exemplos Prontos
                        </h2>
                    </div>
                    <div class="p-4 transition-colors duration-300" style="color: var(--text-color);">
                        <div class="space-y-4">
                            <div>
                                <h3 class="text-sm font-medium mb-2 transition-colors duration-300" style="color: var(--text-muted);">Básicos</h3>
                                <div class="flex flex-wrap gap-2">
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300"
                                        style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="button">Botão Simples</button>
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="buttonGroup">Grupo de Botões</button>
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="toggle">Toggle</button>
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="counter">Contador</button>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-sm font-medium mb-2 transition-colors duration-300" style="color: var(--text-muted);">Layout</h3>
                                <div class="flex flex-wrap gap-2">
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="card">Card</button>
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="cardList">Lista de Cards</button>
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="tabs">Tabs</button>
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="accordion">Accordion</button>
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="dashboard">Dashboard</button>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-sm font-medium mb-2 transition-colors duration-300" style="color: var(--text-muted);">Interativos</h3>
                                <div class="flex flex-wrap gap-2">
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="form">Formulário</button>
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="loginForm">Login</button>
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="complexForm">Formulário Complexo</button>
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="userTable">Tabela de Usuários</button>
                                </div>
                            </div>
                            <div>
                                <h3 class="text-sm font-medium mb-2 transition-colors duration-300" style="color: var(--text-muted);">Testes Tailwind</h3>
                                <div class="flex flex-wrap gap-2">
                                    <button
                                        class="example-button px-3 py-1.5 text-sm rounded-md font-medium transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);"
                                        data-example="tailwindTest">Teste Tailwind</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Console Log -->
                <section class="rounded-xl shadow-sm border overflow-hidden transition-colors duration-300" style="background-color: var(--card-bg); border-color: var(--border-color);">
                    <div class="border-b px-4 py-3 flex justify-between items-center transition-colors duration-300" style="border-color: var(--border-color); background-color: var(--hover-bg);">
                        <h2 class="font-semibold flex items-center gap-2 transition-colors duration-300" style="color: var(--text-color);">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="text-primary-500">
                                <rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect>
                                <line x1="3" y1="9" x2="21" y2="9"></line>
                                <line x1="3" y1="15" x2="21" y2="15"></line>
                            </svg>
                            Console
                        </h2>
                        <button id="clear-console"
                            class="text-xs text-gray-500 hover:text-gray-700 flex items-center gap-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M3 6h18"></path>
                                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
                                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                            </svg>
                            Limpar
                        </button>
                    </div>
                    <div id="log-container" class="h-64 overflow-y-auto p-3 text-sm transition-colors duration-300" style="background-color: var(--hover-bg); color: var(--text-color);">
                        <div class="log-entry info">Logs de comunicação aparecerão aqui...</div>
                    </div>
                </section>
            </div>

            <!-- Preview Section -->
            <div class="lg:col-span-1">
                <section
                    class="rounded-xl shadow-sm border overflow-hidden h-full flex flex-col transition-colors duration-300" style="background-color: var(--card-bg); border-color: var(--border-color);">
                    <div class="border-b px-4 py-3 transition-colors duration-300" style="border-color: var(--border-color); background-color: var(--hover-bg);">
                        <h2 class="font-semibold flex items-center gap-2 transition-colors duration-300" style="color: var(--text-color);">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="text-primary-500">
                                <path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path>
                                <path d="M2 12s3-9 10-9 10 9 10 9-3 9-10 9-10-9-10-9Z"></path>
                            </svg>
                            Visualização
                        </h2>
                    </div>
                    <div class="flex-grow p-4 transition-colors duration-300" style="background-color: var(--hover-bg);">
                        <div class="iframe-container h-full rounded-lg border overflow-hidden transition-colors duration-300" style="background-color: #ffffff; border-color: var(--border-color);">
                            <iframe id="react-iframe" src="http://localhost:5173" class="w-full h-full"></iframe>
                        </div>
                    </div>
                    <div
                        class="border-t px-4 py-3 text-xs flex items-center justify-between transition-colors duration-300" style="border-color: var(--border-color); background-color: var(--hover-bg); color: var(--text-muted);">
                        <span>Renderização em tempo real</span>
                        <button id="refresh-iframe"
                            class="text-primary-600 hover:text-primary-800 flex items-center gap-1">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <path d="M21 2v6h-6"></path>
                                <path d="M3 12a9 9 0 0 1 15-6.7l3-3"></path>
                                <path d="M3 22v-6h6"></path>
                                <path d="M21 12a9 9 0 0 1-15 6.7l-3 3"></path>
                            </svg>
                            Recarregar
                        </button>
                    </div>
                </section>
            </div>
        </div>



        <!-- Footer -->
        <footer class="mt-8 text-center text-sm py-4 transition-colors duration-300" style="color: var(--text-muted);">
            <p>Desenvolvido para facilitar a criação e teste de componentes React com Tailwind CSS.</p>
            <p class="mt-1">&copy; 2025 React Playground</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script type="module">
        // Importar os exemplos de código
        import { codeExamples } from './src/snippets/code-snippets.js';

        // Usar os exemplos do arquivo code-snippets.js
        const examples = codeExamples;

        // Elementos do DOM
        const iframe = document.getElementById('react-iframe');
        const componentCodeInput = document.getElementById('component-code');
        const monacoContainer = document.getElementById('monaco-editor-container');
        const renderButton = document.getElementById('render-button');
        const logContainer = document.getElementById('log-container');
        const exampleButtons = document.querySelectorAll('.example-button');
        const clearConsoleButton = document.getElementById('clear-console');
        const refreshIframeButton = document.getElementById('refresh-iframe');
        const formatCodeButton = document.getElementById('format-code');
        const themeToggleButton = document.getElementById('theme-toggle');

        // Variáveis de estado
        let iframeReady = false;
        let isDarkMode = localStorage.getItem('darkMode') === 'true';
        let monacoEditor = null;

        // Aplicar tema escuro se estiver salvo nas preferências
        if (isDarkMode) {
            document.documentElement.classList.add('dark');
        }

        // Função para adicionar log
        function addLogEntry(message, type = 'info') {
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;

            const timestamp = new Date().toLocaleTimeString();
            logEntry.textContent = `[${timestamp}] ${message}`;

            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        // Função para limpar o console
        clearConsoleButton.addEventListener('click', () => {
            logContainer.innerHTML = '';
            addLogEntry('Console limpo.', 'info');
        });

        // Função para recarregar o iframe
        refreshIframeButton.addEventListener('click', () => {
            iframe.src = iframe.src;
            addLogEntry('Iframe recarregado.', 'info');
            iframeReady = false;
        });

        // Toggle dark/light mode
        themeToggleButton.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            // Salvar preferência no localStorage
            localStorage.setItem('darkMode', isDarkMode);

            if (isDarkMode) {
                document.documentElement.classList.add('dark');
                themeToggleButton.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>';

                // Mudar o tema do Monaco Editor para escuro
                if (monacoEditor) {
                    monaco.editor.setTheme('vs-dark');
                }
            } else {
                document.documentElement.classList.remove('dark');
                themeToggleButton.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"/></svg>';

                // Mudar o tema do Monaco Editor para claro
                if (monacoEditor) {
                    monaco.editor.setTheme('vs');
                }
            }
            addLogEntry(`Modo ${isDarkMode ? 'escuro' : 'claro'} ativado.`, 'info');
        });

        // Atualizar o ícone do botão de tema de acordo com o estado atual
        if (isDarkMode) {
            themeToggleButton.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></svg>';
        } else {
            themeToggleButton.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"/></svg>';
        }

        // Inicializar o Monaco Editor
        function initMonacoEditor() {
            require(['vs/editor/editor.main'], function() {
                // Registrar a linguagem JSX
                monaco.languages.typescript.javascriptDefaults.setCompilerOptions({
                    jsx: monaco.languages.typescript.JsxEmit.React,
                    jsxFactory: 'React.createElement',
                    reactNamespace: 'React',
                    allowNonTsExtensions: true,
                    allowJs: true,
                    target: monaco.languages.typescript.ScriptTarget.Latest
                });

                // Criar o editor
                monacoEditor = monaco.editor.create(monacoContainer, {
                    value: componentCodeInput.value,
                    language: 'javascript',
                    theme: isDarkMode ? 'vs-dark' : 'vs',
                    automaticLayout: true,
                    minimap: { enabled: false },
                    scrollBeyondLastLine: false,
                    fontSize: 14,
                    lineNumbers: 'on',
                    renderLineHighlight: 'all',
                    tabSize: 2,
                    wordWrap: 'on',
                    formatOnPaste: true,
                    formatOnType: true
                });

                // Adicionar evento de mudança para sincronizar com o input hidden
                monacoEditor.onDidChangeModelContent(() => {
                    componentCodeInput.value = monacoEditor.getValue();
                });

                addLogEntry('Editor de código inicializado.', 'info');
            });
        }

        // Inicializar o editor quando a página carregar
        window.addEventListener('load', initMonacoEditor);

        // Função para formatar código
        formatCodeButton.addEventListener('click', () => {
            if (monacoEditor) {
                try {
                    // Usar a formatação nativa do Monaco
                    monacoEditor.getAction('editor.action.formatDocument').run();
                    addLogEntry('Código formatado.', 'info');
                } catch (error) {
                    addLogEntry(`Erro ao formatar código: ${error.message}`, 'error');
                }
            }
        });

        // Função para enviar mensagem para o iframe
        function sendMessageToIframe(type, payload) {
            if (!iframeReady) {
                addLogEntry('O iframe ainda não está pronto para receber mensagens.', 'error');
                return;
            }

            const message = { type, payload };
            iframe.contentWindow.postMessage(message, '*');
            addLogEntry(`Mensagem enviada: ${type}`, 'sent');
        }

        // Listener para mensagens do iframe
        window.addEventListener('message', (event) => {
            const message = event.data;

            if (!message || !message.type) return;

            addLogEntry(`Mensagem recebida: ${message.type}`, 'received');

            switch (message.type) {
                case 'READY':
                    iframeReady = true;
                    addLogEntry('Iframe está pronto para receber mensagens!', 'received');
                    break;

                case 'COMPONENT_RENDERED':
                    addLogEntry('Componente renderizado com sucesso!', 'received');
                    break;

                case 'ERROR':
                    addLogEntry(`Erro: ${message.payload.message}`, 'error');
                    break;

                case 'LOG':
                    addLogEntry(`Log do iframe: ${JSON.stringify(message.payload)}`, 'received');
                    break;
            }
        });

        // Event listener para o botão de renderizar
        renderButton.addEventListener('click', () => {
            // Obter o código do Monaco Editor
            const code = monacoEditor ? monacoEditor.getValue().trim() : componentCodeInput.value.trim();

            if (!code) {
                addLogEntry('Por favor, digite algum código para renderizar.', 'error');
                return;
            }

            sendMessageToIframe('RENDER_COMPONENT', code);
        });

        // Event listeners para os botões de exemplo
        exampleButtons.forEach(button => {
            button.addEventListener('click', () => {
                const exampleName = button.getAttribute('data-example');
                const exampleCode = examples[exampleName];

                if (exampleCode) {
                    if (monacoEditor) {
                        monacoEditor.setValue(exampleCode);
                    } else {
                        componentCodeInput.value = exampleCode;
                    }
                    addLogEntry(`Exemplo "${exampleName}" carregado.`, 'info');
                } else {
                    addLogEntry(`Exemplo "${exampleName}" não encontrado.`, 'error');
                }
            });
        });

        // Importar o serviço de API
        import * as apiService from './src/lib/api-service.js';

        // Elementos adicionais do DOM
        const shareButton = document.getElementById('share-button');
        const apiComponentsList = document.getElementById('api-components-list');
        const searchInput = document.getElementById('search-components');
        const filterAllBtn = document.getElementById('filter-all');
        const filterFoundationBtn = document.getElementById('filter-foundation');
        const filterSystemBtn = document.getElementById('filter-system');

        // Configurando os botões de filtro
        function setActiveFilter(button) {
            // Remover a classe ativa de todos os botões
            [filterAllBtn, filterFoundationBtn, filterSystemBtn].forEach(btn => {
                if (btn) btn.classList.remove('active');
            });

            // Adicionar a classe ativa ao botão clicado
            button.classList.add('active');
        }

        filterAllBtn.addEventListener('click', () => {
            setActiveFilter(filterAllBtn);
            currentFilter = 'all';
            applyFilters();
        });

        if (filterFoundationBtn) {
            filterFoundationBtn.addEventListener('click', () => {
                setActiveFilter(filterFoundationBtn);
                currentFilter = 'foundation';
                applyFilters();
            });
        }

        if (filterSystemBtn) {
            filterSystemBtn.addEventListener('click', () => {
                setActiveFilter(filterSystemBtn);
                currentFilter = 'system';
                applyFilters();
            });
        }

        // Função para compartilhar via URL
        function shareViaUrl() {
            // Obter o código do Monaco Editor
            const code = monacoEditor ? monacoEditor.getValue().trim() : componentCodeInput.value.trim();
            if (!code) {
                addLogEntry('Não há código para compartilhar.', 'error');
                return;
            }

            // Codificar o código em base64 para URL
            const encodedCode = btoa(encodeURIComponent(code));
            const shareUrl = `${window.location.href.split('?')[0]}?code=${encodedCode}`;

            // Copiar para a área de transferência
            navigator.clipboard.writeText(shareUrl)
                .then(() => {
                    addLogEntry('URL copiada para a área de transferência!', 'info');

                    // Notificação de sucesso
                    const notification = document.createElement('div');
                    notification.className = 'fixed top-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 flex items-center';
                    notification.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        URL copiada com sucesso!
                    `;
                    document.body.appendChild(notification);

                    // Remover a notificação após 3 segundos
                    setTimeout(() => {
                        notification.classList.add('opacity-0', 'transition-opacity', 'duration-500');
                        setTimeout(() => notification.remove(), 500);
                    }, 3000);
                })
                .catch(err => {
                    addLogEntry(`Erro ao copiar URL: ${err}`, 'error');
                    // Fallback para seleção manual
                    prompt('Copie a URL abaixo:', shareUrl);
                });
        }

        // Event listener para o botão de compartilhar
        shareButton.addEventListener('click', shareViaUrl);

        // Função para carregar código da URL
        function loadFromUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const encodedCode = urlParams.get('code');

            if (encodedCode) {
                try {
                    const code = decodeURIComponent(atob(encodedCode));
                    if (monacoEditor) {
                        monacoEditor.setValue(code);
                    } else {
                        componentCodeInput.value = code;
                    }
                    addLogEntry('Código carregado da URL.', 'info');

                    // Renderizar automaticamente
                    if (iframeReady) {
                        sendMessageToIframe('RENDER_COMPONENT', code);
                    } else {
                        // Se o iframe não estiver pronto, aguardar e tentar novamente
                        const checkInterval = setInterval(() => {
                            if (iframeReady) {
                                sendMessageToIframe('RENDER_COMPONENT', code);
                                clearInterval(checkInterval);
                            }
                        }, 500);
                    }
                } catch (error) {
                    addLogEntry(`Erro ao decodificar código da URL: ${error}`, 'error');
                }
            }
        }

        // Variáveis para filtro e busca
        let currentFilter = 'all';
        let currentSearchTerm = '';

        // Função para aplicar filtros à lista de componentes
        function applyFilters() {
            const term = currentSearchTerm.toLowerCase().trim();
            const componentCards = apiComponentsList.querySelectorAll('.component-card');

            let visibleCount = 0;
            componentCards.forEach(card => {
                const title = card.querySelector('h3').textContent.toLowerCase();
                const id = card.querySelector('.component-id').textContent.toLowerCase();
                const updatedBy = card.querySelector('.component-author').textContent.toLowerCase();
                const typeElement = card.querySelector('.component-type');
                const type = typeElement ? typeElement.textContent.toLowerCase() : '';

                // Verificar se o componente corresponde ao filtro de categoria
                let matchesFilter = currentFilter === 'all';
                if (!matchesFilter) {
                    if (currentFilter === 'foundation' && type.toLowerCase() === 'foundation') matchesFilter = true;
                    if (currentFilter === 'system' && type.toLowerCase() === 'system') matchesFilter = true;
                }

                // Verificar se o componente corresponde ao termo de busca
                const matchesSearch = term === '' ||
                    title.includes(term) ||
                    id.includes(term) ||
                    updatedBy.includes(term);

                if (matchesFilter && matchesSearch) {
                    card.style.display = '';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            // Mostrar mensagem se nenhum componente for encontrado
            const noResultsMessage = apiComponentsList.querySelector('.no-results-message');
            if (visibleCount === 0 && !noResultsMessage) {
                const message = document.createElement('div');
                message.className = 'no-results-message col-span-full text-center py-8';
                message.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-3 text-gray-400"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    <p class="text-gray-500">Nenhum componente encontrado ${currentSearchTerm ? `para "${currentSearchTerm}"` : ''} ${currentFilter !== 'all' ? `na categoria selecionada` : ''}</p>
                `;
                apiComponentsList.appendChild(message);
            } else if (visibleCount > 0 && noResultsMessage) {
                noResultsMessage.remove();
            }
        }

        // Event listener para a busca
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                currentSearchTerm = e.target.value;
                applyFilters();
            });
        }

        // Função para carregar componentes da API
        async function loadApiComponents() {
            apiComponentsList.innerHTML = `
                <div class="text-center col-span-full py-12">
                    <svg class="animate-spin h-8 w-8 text-primary-500 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="text-gray-500">Carregando componentes...</p>
                </div>
            `;

            try {
                const components = await apiService.fetchComponents();

                if (components.length === 0) {
                    apiComponentsList.innerHTML = `
                        <div class="text-center col-span-full py-12">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-4 text-gray-400">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="8" x2="12" y2="12"></line>
                                <line x1="12" y1="16" x2="12.01" y2="16"></line>
                            </svg>
                            <p class="text-gray-500 text-lg">Nenhum componente encontrado.</p>
                        </div>
                    `;
                    return;
                }

                apiComponentsList.innerHTML = '';
                components.forEach(component => {
                    // Determinar o tipo de componente com base na categoria da API
                    let componentType = component.category || 'Componente';
                    let typeColor = 'bg-gray-100 text-gray-800';


                    // Definir cores com base na categoria
                    if (componentType === 'Foundation') {
                        typeColor = 'bg-blue-100 text-blue-800';
                    } else if (componentType === 'System') {
                        typeColor = 'bg-purple-100 text-purple-800';
                    }

                    const componentCard = document.createElement('div');
                    componentCard.className = 'component-card rounded-lg border border-gray-200 hover:border-primary-300 transition-all duration-300 hover:shadow-md bg-white overflow-hidden flex flex-col';

                    componentCard.innerHTML = `
                        <div class="p-4 border-b border-gray-100 bg-gray-50 flex justify-between items-start">
                            <h3 class="font-semibold text-gray-800 truncate">${component.description || `Componente ${component.id}`}</h3>
                            <span class="${typeColor} component-type text-xs px-2 py-1 rounded-full font-medium">${componentType}</span>
                        </div>
                        <div class="p-4 flex-grow">
                            <div class="flex items-center gap-2 mb-3">
                                <span class="component-id text-xs font-medium bg-gray-200 text-gray-700 px-2 py-1 rounded">ID: ${component.id}</span>
                                ${component.categoryId ? `<span class="text-xs font-medium bg-gray-200 text-gray-700 px-2 py-1 rounded">Cat: ${component.categoryId}</span>` : ''}
                                ${component.updatedAt ? `<span class="text-xs text-gray-500">Atualizado: ${new Date(component.updatedAt).toLocaleDateString()}</span>` : ''}
                            </div>
                            <div class="flex items-center mt-2">
                                ${component.updatedByPhoto ? `<img src="${component.updatedByPhoto}" alt="Avatar" class="w-6 h-6 rounded-full mr-2">` : ''}
                                <p class="component-author text-sm text-gray-600">Autor: ${component.updatedBy || 'N/A'}</p>
                            </div>
                        </div>
                        <div class="p-3 border-t border-gray-100 bg-gray-50">
                            <button class="load-component-btn w-full bg-primary-500 hover:bg-primary-600 text-white px-3 py-2 rounded text-sm font-medium transition-colors flex items-center justify-center gap-2" data-id="${component.id}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                                Carregar Componente
                            </button>
                        </div>
                    `;

                    apiComponentsList.appendChild(componentCard);
                });

                // Adicionar event listeners aos botões de carregar
                document.querySelectorAll('.load-component-btn').forEach(button => {
                    button.addEventListener('click', async () => {
                        // Efeito visual de carregamento
                        const originalText = button.innerHTML;
                        button.innerHTML = `
                            <svg class="animate-spin h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            Carregando...
                        `;
                        button.disabled = true;

                        try {
                            const componentId = parseInt(button.getAttribute('data-id'), 10);
                            const component = await apiService.fetchComponentById(componentId);

                            if (component && component.code) {
                                const formattedCode = apiService.formatCode(component.code);
                                if (monacoEditor) {
                                    monacoEditor.setValue(formattedCode);
                                } else {
                                    componentCodeInput.value = formattedCode;
                                }
                                addLogEntry(`Componente ${componentId} carregado com sucesso.`, 'info');

                                // Renderizar automaticamente o componente
                                if (iframeReady) {
                                    sendMessageToIframe('RENDER_COMPONENT', formattedCode);
                                }

                                // Rolar a página até o editor
                                document.getElementById('monaco-editor-container').scrollIntoView({ behavior: 'smooth', block: 'start' });
                            } else {
                                addLogEntry(`Erro ao carregar componente ${componentId}: Código não encontrado.`, 'error');
                            }
                        } catch (error) {
                            addLogEntry(`Erro ao carregar componente: ${error.message}`, 'error');
                        } finally {
                            // Restaurar o botão
                            setTimeout(() => {
                                button.innerHTML = originalText;
                                button.disabled = false;
                            }, 500);
                        }
                    });
                });

                // Aplicar filtros iniciais
                applyFilters();

            } catch (error) {
                apiComponentsList.innerHTML = `
                    <div class="text-center col-span-full py-12">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-4 text-red-500">
                            <circle cx="12" cy="12" r="10"></circle>
                            <line x1="12" y1="8" x2="12" y2="12"></line>
                            <line x1="12" y1="16" x2="12.01" y2="16"></line>
                        </svg>
                        <p class="text-red-500 text-lg mb-2">Erro ao carregar componentes</p>
                        <p class="text-red-400">${error.message}</p>
                        <button id="retry-load" class="mt-4 px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-md text-sm">Tentar novamente</button>
                    </div>
                `;

                // Adicionar event listener para o botão de tentar novamente
                document.getElementById('retry-load')?.addEventListener('click', loadApiComponents);

                addLogEntry(`Erro ao carregar componentes da API: ${error.message}`, 'error');
            }
        }

        // Verificar se há código na URL ao carregar a página
        loadFromUrl();

        // Carregar componentes da API automaticamente
        loadApiComponents();

        // Inicialização
        addLogEntry('Página carregada. Aguardando iframe ficar pronto...', 'info');

        // Adicionar event listeners para fechar o menu no mobile
        document.addEventListener('click', (e) => {
            // Lógica para fechar menus mobile se necessário
        });
    </script>
</body>

</html>